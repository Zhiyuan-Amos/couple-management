@using Couple.Client.Utility
<div style="padding-bottom: 56px;" class="mh-100 overflow-auto">
    <Virtualize Items="@ToDos" Context="toDo">
        <div class="card bg-light mx-3 my-2"
             @onclick="@(() => EditToDo(toDo))">
            <div class="card-body">
                <div class="d-flex card-title">
                    <i style="@CssHelper.GetIcon(toDo.For)"></i>
                    <h5 class="mb-0 ps-2">
                        @toDo.Name
                    </h5>
                </div>
                @foreach (var (innerToDo, index) in toDo.ToDos.Select((item, index) => (item, index)))
                {
                    <div style="min-height: 2rem; margin-bottom: .25rem;"
                         class="d-flex align-items-center">
                        <input style="min-height: 2em; min-width: 2em; margin-top: 0;"
                               class="form-check-input"
                               type="checkbox"
                               checked="@innerToDo.IsCompleted"
                               @onchange="@(_ => OnCheckboxToggle(toDo.Id, innerToDo))"
                               id="@index"
                               @onclick:stopPropagation=true>
                        <label class="ps-1"
                               for="@index"
                               @onclick:stopPropagation=true>
                            @innerToDo.Content
                        </label>
                    </div>
                }
            </div>
        </div>
    </Virtualize>
</div>
